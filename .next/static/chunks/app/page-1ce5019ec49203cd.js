(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{34405:function(e,t,s){Promise.resolve().then(s.bind(s,65828))},65828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var a=s(57437),l=s(2265),i=s(59077),n=s(54829);let r=n.Z.create({baseURL:"http://localhost:4001",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)});var d=s(96689);let c={clients:{client_name:{type:"string",required:!0},overall_status:{type:"string",enum:["active","disabled"],required:!0},plan:{type:"string",enum:["Basic","Premium","VIP"],required:!0},priority:{type:"string",enum:["Low","Medium","High","Highest","Unconfirmed"],required:!0},customer:{type:"string",required:!0},agency:{type:"string",required:!0},onboarding:{type:"string",enum:["Complete","Incomplete"],required:!0},channel_id:{type:"string"},channel_name:{type:"string"},initial_search_status:{type:"string"},gender:{type:"string"},username:{type:"string"},created_by:{type:"string",required:!0},created:{type:"date"},last_modified:{type:"date"},search_status:{type:"object"},social_media_links:{type:"object"},search_terms:{type:"object",required:!0},channel_details:{type:"object"},_id:{type:"objectId"}},google_findings:{client_id:{type:"objectId",required:!0},url:{type:"string",required:!0},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},priority:{type:"string",enum:["Low","Medium","High","Critical"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},colab_links:{client_id:{type:"objectId",required:!0},url:{type:"string",required:!0},title:{type:"string"},status:{type:"string",enum:["active","inactive","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},colab_updates:{link_all_id:{type:"objectId",required:!0},update_type:{type:"string",enum:["content_change","status_change","removal"]},description:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},twitter_findings:{client_id:{type:"objectId",required:!0},tweet_id:{type:"string",required:!0},tweet_url:{type:"string",required:!0},content:{type:"string"},author:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},reddit_data:{client_id:{type:"objectId",required:!0},post_id:{type:"string",required:!0},post_url:{type:"string",required:!0},title:{type:"string"},content:{type:"string"},subreddit:{type:"string"},author:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},excluded_domains:{domain:{type:"string",required:!0},reason:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},included_domains:{domain:{type:"string",required:!0},priority:{type:"string",enum:["Low","Medium","High"]},created:{type:"date"},_id:{type:"objectId"}},rejected_google_domains:{domain:{type:"string",required:!0},rejection_reason:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},delisted_google_domains:{domain:{type:"string",required:!0},delisted_date:{type:"date"},created:{type:"date"},_id:{type:"objectId"}}},o=[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Not Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"},{value:"in",label:"In"},{value:"not_in",label:"Not In"},{value:"gt",label:"Greater Than"},{value:"gte",label:"Greater Than or Equal"},{value:"lt",label:"Less Than"},{value:"lte",label:"Less Than or Equal"},{value:"between",label:"Between"},{value:"exists",label:"Exists"},{value:"not_exists",label:"Not Exists"}];function QueryCondition(e){let{condition:t,collection:s,onChange:l,onRemove:i}=e,n=c[s],handleFieldChange=e=>{l({...t,field:e})},handleOperatorChange=e=>{l({...t,operator:e})},handleValueChange=e=>{l({...t,value:e})},handleValuesChange=e=>{let s=e.split(",").map(e=>e.trim()).filter(e=>e);l({...t,values:s})},getFieldType=e=>n&&e?n[e]:null,getPlaceholder=e=>{let t=getFieldType(e);if(!t)return"Value";if(t.enum)return"Select from: ".concat(t.enum.join(", "));switch(t.type){case"string":return"Enter text...";case"number":return"Enter number...";case"date":return"Enter date (YYYY-MM-DD)...";case"objectId":return"Enter ObjectId...";case"boolean":return"true or false";case"object":return"JSON object...";default:return"Enter value..."}},r=["in","not_in","between"].includes(t.operator),x=["exists","not_exists"].includes(t.operator);return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.field,onChange:e=>handleFieldChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Field"}),n&&Object.keys(n).map(e=>{let t=n[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l=t.enum?"(".concat(t.enum.join("|"),")"):"(".concat(t.type,")");return(0,a.jsxs)("option",{value:e,children:[s," ",l,t.required&&" *"]},e)})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.operator,onChange:e=>handleOperatorChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Operator"}),o.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})}),!x&&(0,a.jsx)("div",{className:"flex-1",children:(()=>{let e=getFieldType(t.field);if(r){var s;return(0,a.jsx)("input",{type:"text",className:"input text-sm",placeholder:"Comma-separated values",value:(null===(s=t.values)||void 0===s?void 0:s.join(", "))||"",onChange:e=>handleValuesChange(e.target.value)})}if(null==e?void 0:e.enum)return(0,a.jsxs)("select",{className:"input text-sm",value:t.value,onChange:e=>handleValueChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select value"}),e.enum.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]});let l=(null==e?void 0:e.type)==="number"?"number":(null==e?void 0:e.type)==="date"?"date":"text";return(0,a.jsx)("input",{type:l,className:"input text-sm",placeholder:getPlaceholder(t.field),value:t.value||"",onChange:e=>handleValueChange(e.target.value)})})()}),(0,a.jsx)("button",{onClick:i,className:"p-2 text-red-500 hover:text-red-700",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]})}function QueryResults(e){let{data:t,onPageChange:s}=e;if(!t.data||0===t.data.length)return(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No results found"});let l=(()=>{let e=new Set;return t.data.forEach(t=>{Object.keys(t).forEach(t=>e.add(t))}),Array.from(e)})();return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",(t.page-1)*t.limit+1," to"," ",Math.min(t.page*t.limit,t.total)," of ",t.total," results"]}),(0,a.jsxs)("span",{children:["Executed in ",t.executionTime,"ms"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:l.map(e=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data.map((e,t)=>(0,a.jsx)("tr",{className:"hover:bg-gray-50",children:l.map(t=>(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,a.jsx)(CellRenderer,{value:e[t]})},t))},t))})]})}),t.totalPages>1&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=Math.max(1,t.page-1);s&&s(e)},disabled:!t.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",t.page," of ",t.totalPages]}),(0,a.jsx)("button",{onClick:()=>{let e=Math.min(t.totalPages,t.page+1);s&&s(e)},disabled:!t.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]})}function CellRenderer(e){let{value:t}=e,[s,i]=(0,l.useState)(!1),[n,r]=(0,l.useState)(!1);if(null==t)return(0,a.jsx)("span",{className:"text-gray-400 italic",children:"null"});if("object"==typeof t)return Array.isArray(t)?0===t.length?(0,a.jsx)("span",{className:"text-gray-400",children:"[]"}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline",children:["[",t.length," items]"]}),n&&(0,a.jsx)(ObjectModal,{value:t,onClose:()=>r(!1),title:"Array Contents"})]}):t.client_name?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:t.client_name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[t.plan&&(0,a.jsx)("span",{className:"bg-blue-100 text-blue-800 px-1 rounded",children:t.plan}),t.priority&&(0,a.jsx)("span",{className:"ml-1 bg-orange-100 text-orange-800 px-1 rounded",children:t.priority})]}),(0,a.jsx)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"View full details"}),n&&(0,a.jsx)(ObjectModal,{value:t,onClose:()=>r(!1),title:"Client Details"})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline",children:[Object.keys(t).length," fields"]}),n&&(0,a.jsx)(ObjectModal,{value:t,onClose:()=>r(!1),title:"Object Details"})]});if("boolean"==typeof t)return(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t?"Yes":"No"});let d=String(t),c=d.length>50,o=c?d.substring(0,50)+"...":d;if(c)return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:async()=>{try{var e;if(await navigator.clipboard.writeText(d),null===(e=document.activeElement)||void 0===e||e.textContent,document.activeElement){let e=document.activeElement,t=e.textContent;e.textContent="Copied!",setTimeout(()=>{"Copied!"===e.textContent&&(e.textContent=t)},1e3)}}catch(e){console.error("Failed to copy text: ",e)}},className:"cursor-pointer hover:bg-gray-100 rounded px-1",title:"Click to copy full text",children:o}),s&&(0,a.jsxs)("div",{className:"absolute z-50 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-lg max-w-md whitespace-normal break-words bottom-full left-0 mb-2",children:[(0,a.jsx)("div",{className:"mb-2",children:d}),(0,a.jsx)("div",{className:"text-xs text-gray-300 border-t border-gray-700 pt-2",children:"\uD83D\uDCA1 Click the text above to copy to clipboard"}),(0,a.jsx)("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]});if(d.includes("T")&&d.includes("Z"))try{let e=new Date(d);return(0,a.jsxs)("span",{className:"text-gray-600",children:[e.toLocaleDateString()," ",e.toLocaleTimeString()]})}catch(e){return(0,a.jsx)("span",{children:o})}return d.startsWith("http")?(0,a.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline max-w-xs truncate block",children:o}):(0,a.jsx)("span",{children:o})}function ObjectModal(e){let{value:t,onClose:s,title:l}=e,i=JSON.stringify(t,null,2),copyToClipboard=async()=>{try{await navigator.clipboard.writeText(i),console.log("JSON copied to clipboard")}catch(e){console.error("Failed to copy JSON: ",e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl max-h-96 overflow-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:l}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:copyToClipboard,className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 bg-blue-50 rounded hover:bg-blue-100",title:"Copy to clipboard",children:"\uD83D\uDCCB Copy"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),(0,a.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto select-all",children:i}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"\uD83D\uDCA1 You can also select and copy text directly from the JSON above"})]})})}function PredefinedQueries(e){let{queries:t,onSelect:s}=e;return t?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"\uD83D\uDCA1 Click any query below to load it, then modify the parameters as needed!"}),Object.entries(t).map(e=>{let[t,l]=e;return(0,a.jsxs)("button",{onClick:()=>s(l),className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors border border-transparent hover:border-blue-200",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-gray-900",children:l.name}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:l.description}),l.conditions&&l.conditions.some(e=>"client_name_here"===e.value||"subreddit_name"===e.value||"removed"===e.value)&&(0,a.jsx)("div",{className:"text-xs text-orange-600 mt-1 font-medium",children:"⚠️ Requires parameter changes"})]},t)})]}):(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading predefined queries..."})}function CollectionSelector(e){let{collections:t,value:s,onChange:l}=e;return(0,a.jsx)("select",{className:"input",value:s,onChange:e=>l(e.target.value),children:null==t?void 0:t.map(e=>(0,a.jsx)("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})}function JoinBuilder(e){let{join:t,collections:s,currentCollection:l,onChange:i,onRemove:n}=e,r=c[l],o=c[t.collection],handleCollectionChange=e=>{i({...t,collection:e})},handleLocalFieldChange=e=>{i({...t,localField:e})},handleForeignFieldChange=e=>{i({...t,foreignField:e})},handleAsChange=e=>{i({...t,as:e})};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.collection,onChange:e=>handleCollectionChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Collection"}),null==s?void 0:s.map(e=>(0,a.jsx)("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.localField,onChange:e=>handleLocalFieldChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Local Field"}),r&&Object.keys(r).map(e=>{let t=r[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l="(".concat(t.type,")");return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.foreignField,onChange:e=>handleForeignFieldChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Foreign Field"}),o&&Object.keys(o).map(e=>{let t=o[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l="(".concat(t.type,")");return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",className:"input text-sm",placeholder:"As",value:t.as,onChange:e=>handleAsChange(e.target.value)})}),(0,a.jsx)("button",{onClick:n,className:"p-2 text-red-500 hover:text-red-700",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]})}function SortBuilder(e){let{sort:t,collection:s,onChange:l,onRemove:i}=e,n=c[s],handleFieldChange=e=>{l({...t,field:e})},handleDirectionChange=e=>{l({...t,direction:e})};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.field,onChange:e=>handleFieldChange(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Field"}),n&&Object.keys(n).map(e=>{let t=n[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l="(".concat(t.type,")");return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:t.direction,onChange:e=>handleDirectionChange(e.target.value),children:[(0,a.jsx)("option",{value:"asc",children:"Ascending"}),(0,a.jsx)("option",{value:"desc",children:"Descending"})]})}),(0,a.jsx)("button",{onClick:i,className:"p-2 text-red-500 hover:text-red-700",children:(0,a.jsx)(d.Z,{className:"h-4 w-4"})})]})}var x=s(5925);function SimpleQueryBuilder(e){let{onResults:t,query:s,onQueryChange:n,onPageChange:d}=e,[c,o]=(0,l.useState)({collection:"google_findings",clientName:"",status:"",priority:"",dateFrom:"",dateTo:"",searchText:"",limit:10,page:1}),m=s||c,u=n||o,h=(0,i.useMutation)(e=>r.post("/query/simple-query",e),{onSuccess:e=>{t(e.data),x.toast.success("Query executed successfully")},onError:e=>{var t,s;x.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Query execution failed")}});return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDE80 Simple Query Builder"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Ask simple questions about your data - just fill in what you're looking for!"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"What type of data?"}),(0,a.jsx)("select",{className:"input",value:m.collection,onChange:e=>u(t=>({...t,collection:e.target.value})),children:[{value:"google_findings",label:"Google Findings"},{value:"twitter_findings",label:"Twitter Findings"},{value:"reddit_data",label:"Reddit Data"},{value:"colab_links",label:"Colab Links"},{value:"clients",label:"Clients"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Client name (optional)"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"e.g., Claire Stone, John Doe",value:m.clientName,onChange:e=>u(t=>({...t,clientName:e.target.value}))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to search all clients"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Status (optional)"}),(0,a.jsx)("select",{className:"input",value:m.status,onChange:e=>u(t=>({...t,status:e.target.value})),children:[{value:"",label:"Any Status"},{value:"rejected",label:"Rejected"},{value:"delisted",label:"Delisted"},{value:"counter-notice",label:"Counter-notice"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Priority (optional)"}),(0,a.jsx)("select",{className:"input",value:m.priority,onChange:e=>u(t=>({...t,priority:e.target.value})),children:[{value:"",label:"Any Priority"},{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Critical",label:"Critical"}].map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"From date (optional)"}),(0,a.jsx)("input",{type:"date",className:"input",value:m.dateFrom,onChange:e=>u(t=>({...t,dateFrom:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"To date (optional)"}),(0,a.jsx)("input",{type:"date",className:"input",value:m.dateTo,onChange:e=>u(t=>({...t,dateTo:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"label",children:"Search for specific content (optional)"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"e.g., sierra skye, domain name, specific keywords",value:m.searchText,onChange:e=>u(t=>({...t,searchText:e.target.value}))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Search in titles, descriptions, and content"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"label",children:"How many results?"}),(0,a.jsxs)("select",{className:"input w-32",value:m.limit,onChange:e=>u(t=>({...t,limit:parseInt(e.target.value)})),children:[(0,a.jsx)("option",{value:10,children:"10 results"}),(0,a.jsx)("option",{value:25,children:"25 results"}),(0,a.jsx)("option",{value:50,children:"50 results"}),(0,a.jsx)("option",{value:100,children:"100 results"})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Example questions you can ask:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,a.jsx)("li",{children:"• \"Show me all Google findings with status 'delisted'\""}),(0,a.jsx)("li",{children:"• \"Find Google findings for client 'Claire Stone' from last month\""}),(0,a.jsx)("li",{children:'• "Show high priority findings created this year"'}),(0,a.jsx)("li",{children:"• \"Search for 'sierra skye' in all Google findings\""})]})]}),(0,a.jsx)("button",{onClick:()=>{h.mutate(m)},disabled:h.isLoading,className:"btn btn-primary w-full",children:h.isLoading?"Searching...":"\uD83D\uDD0D Search"})]})}function QuickStartGuide(e){let{onSelectExample:t}=e;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDE80 Quick Start Examples"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Click an example to get started with common queries:"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{id:"google-findings-search",title:"Search Google Findings",description:"Find Google findings with text search (like 'sierra skye')",icon:"\uD83D\uDD0D",action:()=>t({collection:"google_findings",searchText:"sierra skye",status:"",clientName:""})},{id:"client-specific-findings",title:"Findings by Client",description:"Find all findings for a specific client",icon:"\uD83D\uDC64",action:()=>t({collection:"google_findings",clientName:"Claire Stone",status:"",searchText:""})},{id:"status-based-search",title:"Filter by Status",description:"Find items with specific status (pending, removed, etc.)",icon:"\uD83D\uDCCA",action:()=>t({collection:"google_findings",status:"removed",clientName:"",searchText:""})},{id:"date-range-search",title:"Date Range Query",description:"Find items created within a specific time period",icon:"\uD83D\uDCC5",action:()=>t({collection:"google_findings",dateFrom:"2024-01-01",dateTo:"2024-12-31",clientName:"",searchText:""})}].map(e=>(0,a.jsx)("button",{onClick:e.action,className:"p-3 text-left bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 rounded-lg border border-blue-200 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]})},e.id))}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"text-sm text-green-800",children:[(0,a.jsx)("strong",{children:"Pro tip:"})," Start with Simple Query mode for basic searches, then switch to Advanced mode for complex joins and filtering."]})})]})}function QueryBuilder(){let[e,t]=(0,l.useState)({collection:"clients",conditions:[],joins:[],sort:[],select:[],page:1,limit:10,search:""}),[s,n]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[o,m]=(0,l.useState)("simple"),[u,h]=(0,l.useState)({collection:"google_findings",clientName:"",status:"",priority:"",dateFrom:"",dateTo:"",searchText:"",limit:10,page:1}),{data:g}=(0,i.useQuery)("collections",()=>r.get("/query/collections").then(e=>e.data)),{data:p}=(0,i.useQuery)("predefined-queries",()=>r.get("/query/predefined-queries").then(e=>e.data)),j=(0,i.useMutation)(e=>r.post("/query/execute",e),{onSuccess:e=>{n(e.data),x.toast.success("Query executed successfully")},onError:e=>{var t,s;x.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Query execution failed")},onSettled:()=>{c(!1)}}),handleSimplePageChange=e=>{let t={...u,page:e};h(t),r.post("/query/simple-query",t).then(e=>{n(e.data),x.toast.success("Query executed successfully")}).catch(e=>{var t,s;x.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Query execution failed")})},updateCondition=(e,s)=>{t(t=>({...t,conditions:t.conditions.map((t,a)=>a===e?s:t)}))},removeCondition=e=>{t(t=>({...t,conditions:t.conditions.filter((t,s)=>s!==e)}))},updateJoin=(e,s)=>{t(t=>({...t,joins:t.joins.map((t,a)=>a===e?s:t)}))},removeJoin=e=>{t(t=>({...t,joins:t.joins.filter((t,s)=>s!==e)}))},updateSort=(e,s)=>{t(t=>({...t,sort:t.sort.map((t,a)=>a===e?s:t)}))},removeSort=e=>{t(t=>({...t,sort:t.sort.filter((t,s)=>s!==e)}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Query Builder"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Build and execute queries on your data - choose simple or advanced mode"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[(0,a.jsx)("button",{onClick:()=>m("simple"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("simple"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"\uD83D\uDE80 Simple Query"}),(0,a.jsx)("button",{onClick:()=>m("advanced"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("advanced"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"⚙️ Advanced Query"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:"simple"===o?(0,a.jsx)(SimpleQueryBuilder,{onResults:n,query:u,onQueryChange:h,onPageChange:handleSimplePageChange}):(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Configuration"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"label",children:"Collection"}),(0,a.jsx)(CollectionSelector,{collections:g,value:e.collection,onChange:e=>t(t=>({...t,collection:e}))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"label",children:"Search"}),(0,a.jsx)("input",{type:"text",className:"input",placeholder:"Enter search terms...",value:e.search,onChange:e=>t(t=>({...t,search:e.target.value}))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("label",{className:"label mb-0",children:"Conditions"}),(0,a.jsx)("button",{onClick:()=>{t(e=>({...e,conditions:[...e.conditions,{field:"",operator:"equals",value:""}]}))},className:"btn btn-secondary text-sm",children:"Add Condition"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.conditions.map((t,s)=>(0,a.jsx)(QueryCondition,{condition:t,collection:e.collection,onChange:e=>updateCondition(s,e),onRemove:()=>removeCondition(s)},s)),0===e.conditions.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No conditions added"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("label",{className:"label mb-0",children:"Joins"}),(0,a.jsx)("button",{onClick:()=>{t(e=>({...e,joins:[...e.joins,{collection:"",localField:"",foreignField:"",as:""}]}))},className:"btn btn-secondary text-sm",children:"Add Join"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.joins.map((t,s)=>(0,a.jsx)(JoinBuilder,{join:t,collections:g,currentCollection:e.collection,onChange:e=>updateJoin(s,e),onRemove:()=>removeJoin(s)},s)),0===e.joins.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No joins added"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("label",{className:"label mb-0",children:"Sort"}),(0,a.jsx)("button",{onClick:()=>{t(e=>({...e,sort:[...e.sort,{field:"",direction:"asc"}]}))},className:"btn btn-secondary text-sm",children:"Add Sort"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.sort.map((t,s)=>(0,a.jsx)(SortBuilder,{sort:t,collection:e.collection,onChange:e=>updateSort(s,e),onRemove:()=>removeSort(s)},s)),0===e.sort.length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No sorting added"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Page"}),(0,a.jsx)("input",{type:"number",className:"input",min:"1",value:e.page,onChange:e=>t(t=>({...t,page:parseInt(e.target.value)||1}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Limit"}),(0,a.jsx)("input",{type:"number",className:"input",min:"1",max:"100",value:e.limit,onChange:e=>t(t=>({...t,limit:parseInt(e.target.value)||10}))})]})]}),(0,a.jsx)("button",{onClick:()=>{c(!0),j.mutate(e)},disabled:d,className:"btn btn-primary w-full",children:d?"Executing...":"Execute Query"})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:["simple"===o&&(0,a.jsx)(QuickStartGuide,{onSelectExample:e=>{h(t=>({...t,...e}))}}),"advanced"===o&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Predefined Queries"}),(0,a.jsx)(PredefinedQueries,{queries:p,onSelect:e=>{t({collection:e.collection,conditions:e.conditions||[],joins:e.joins||[],sort:e.sort||[],select:e.select||[],page:1,limit:10,search:""})}})]}),s&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Results"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Records:"}),(0,a.jsx)("span",{className:"font-medium",children:s.total})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Page:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.page," of ",s.totalPages]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Execution Time:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.executionTime,"ms"]})]})]})]})]})]}),s&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Results"}),(0,a.jsx)(QueryResults,{data:s,onPageChange:"simple"===o?handleSimplePageChange:s=>{let a={...e,page:s};t(a),c(!0),j.mutate(a)}})]})]})}var m=s(96602),u=s(28093),h=s(57042);function MetricCard(e){let{title:t,value:s,subtitle:l,change:i,changeType:n="neutral"}=e;return(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s}),l&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:l})]}),i&&(0,a.jsxs)("div",{className:(0,h.W)("flex items-center text-sm font-medium","positive"===n&&"text-green-600","negative"===n&&"text-red-600","neutral"===n&&"text-gray-600"),children:["positive"===n&&(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"negative"===n&&(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),i]})]})})}var g=s(44602);function RecentActivity(e){let{data:t}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.type," for ",e.client]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(0,g.Z)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.customer," • ",e.domain||"N/A"]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("resolved"===e.status||"delisted"===e.status?"bg-green-100 text-green-800":"pending"===e.status||"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No recent activity"})}function TopPerformers(e){let{data:t}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-primary-700",children:t+1})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e._id}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.customer," • ",e.agency]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.resolutionRate.toFixed(1),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.resolvedFindings,"/",e.totalFindings," resolved"]})]})]},e._id))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No performance data available"})}var p=s(10887),j=s(67057);function Alerts(e){let{data:t}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,a.jsx)("div",{className:(0,h.W)("p-4 rounded-lg border-l-4","error"===e.type&&"bg-red-50 border-red-400","warning"===e.type&&"bg-yellow-50 border-yellow-400","info"===e.type&&"bg-blue-50 border-blue-400"),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:"error"===e.type||"warning"===e.type?(0,a.jsx)(p.Z,{className:"h-5 w-5 text-red-400"}):(0,a.jsx)(j.Z,{className:"h-5 w-5 text-blue-400"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:(0,h.W)("text-sm font-medium","error"===e.type&&"text-red-800","warning"===e.type&&"text-yellow-800","info"===e.type&&"text-blue-800"),children:e.title}),(0,a.jsxs)("div",{className:(0,h.W)("mt-2 text-sm","error"===e.type&&"text-red-700","warning"===e.type&&"text-yellow-700","info"===e.type&&"text-blue-700"),children:[(0,a.jsx)("p",{children:e.message}),e.data&&e.data.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Affected items:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[e.data.slice(0,3).map((e,t)=>(0,a.jsxs)("li",{children:[e.client_name||e._id||"Item ".concat(t+1),e.pendingCount&&" (".concat(e.pendingCount," pending)")]},t)),e.data.length>3&&(0,a.jsxs)("li",{children:["... and ",e.data.length-3," more"]})]})]})]})]})]})},t))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No alerts"})}function Dashboard(){let{data:e,isLoading:t}=(0,i.useQuery)("dashboard-overview",()=>r.get("/dashboard/overview").then(e=>e.data)),{data:s,isLoading:l}=(0,i.useQuery)("dashboard-activity",()=>r.get("/dashboard/recent-activity?limit=10").then(e=>e.data)),{data:n,isLoading:d}=(0,i.useQuery)("dashboard-performers",()=>r.get("/dashboard/top-performers").then(e=>e.data)),{data:c,isLoading:o}=(0,i.useQuery)("dashboard-alerts",()=>r.get("/dashboard/alerts").then(e=>e.data)),{data:x,isLoading:m}=(0,i.useQuery)("dashboard-quick-stats",()=>r.get("/dashboard/quick-stats").then(e=>e.data));return t?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Overview of your takedowns management system"})]}),x&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(MetricCard,{title:"Findings (24h)",value:x.findingsLast24h,change:"+12%",changeType:"positive"}),(0,a.jsx)(MetricCard,{title:"Findings (7d)",value:x.findingsLast7d,change:"+8%",changeType:"positive"}),(0,a.jsx)(MetricCard,{title:"New Clients (7d)",value:x.newClientsLast7d,change:"+3%",changeType:"positive"}),(0,a.jsx)(MetricCard,{title:"Resolved (7d)",value:x.resolvedLast7d,change:"+15%",changeType:"positive"})]}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(MetricCard,{title:"Total Clients",value:e.totalClients,subtitle:"".concat(e.activeClients," active")}),(0,a.jsx)(MetricCard,{title:"Total Findings",value:e.totalFindings,subtitle:"".concat(e.resolvedFindings," resolved")}),(0,a.jsx)(MetricCard,{title:"Resolution Rate",value:"".concat(e.resolutionRate.toFixed(1),"%"),subtitle:"".concat(e.pendingFindings," pending")}),(0,a.jsx)(MetricCard,{title:"High Priority",value:e.highPriorityClients,subtitle:"clients"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),l?(0,a.jsx)("div",{className:"animate-pulse space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"},t))}):(0,a.jsx)(RecentActivity,{data:s})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performers"}),d?(0,a.jsx)("div",{className:"animate-pulse space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"},t))}):(0,a.jsx)(TopPerformers,{data:n})]})]}),c&&c.length>0&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Alerts"}),(0,a.jsx)(Alerts,{data:c})]})]})}var y=s(45253),v=s(57703),b=s(28485),N=s(36612),f=s(86812),C=s(44909),w=s(16573),_=s(24235),S=s(50039),k=s(31346),F=s(38227),D=s(19223);function Analytics(){let{data:e,isLoading:t}=(0,i.useQuery)("analytics-dashboard",()=>r.get("/analytics/dashboard").then(e=>e.data)),{data:s,isLoading:l}=(0,i.useQuery)("analytics-clients",()=>r.get("/analytics/clients").then(e=>e.data)),{data:n,isLoading:d}=(0,i.useQuery)("analytics-findings",()=>r.get("/analytics/findings").then(e=>e.data)),{data:c,isLoading:o}=(0,i.useQuery)("analytics-performance",()=>r.get("/analytics/performance").then(e=>e.data));if(t||l||d||o)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let x=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Comprehensive analytics and insights for your takedowns system"})]}),(null==e?void 0:e.overview)&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:e.overview.totalClients}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Clients"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.overview.totalGoogleFindings}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Google Findings"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.overview.totalColabLinks}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Colab Links"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.overview.totalTwitterFindings}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Twitter Findings"})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.overview.totalRedditData}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Reddit Data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Client Distribution"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"By Status"}),(0,a.jsx)(y.h,{width:"100%",height:200,children:(0,a.jsxs)(v.u,{children:[(0,a.jsx)(b.b,{data:s.clientsByStatus,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:s.clientsByStatus.map((e,t)=>(0,a.jsx)(N.b,{fill:x[t%x.length]},"cell-".concat(t)))}),(0,a.jsx)(f.u,{})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"By Priority"}),(0,a.jsx)(y.h,{width:"100%",height:200,children:(0,a.jsxs)(C.v,{data:s.clientsByPriority,children:[(0,a.jsx)(w.q,{strokeDasharray:"3 3"}),(0,a.jsx)(_.K,{dataKey:"_id"}),(0,a.jsx)(S.B,{}),(0,a.jsx)(f.u,{}),(0,a.jsx)(k.$,{dataKey:"count",fill:"#3B82F6"})]})})]})]})]}),n&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Finding Analytics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Google Findings by Type"}),(0,a.jsx)(y.h,{width:"100%",height:200,children:(0,a.jsxs)(C.v,{data:n.googleFindingsByType,children:[(0,a.jsx)(w.q,{strokeDasharray:"3 3"}),(0,a.jsx)(_.K,{dataKey:"_id"}),(0,a.jsx)(S.B,{}),(0,a.jsx)(f.u,{}),(0,a.jsx)(k.$,{dataKey:"count",fill:"#10B981"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Twitter Findings by Status"}),(0,a.jsx)(y.h,{width:"100%",height:200,children:(0,a.jsxs)(v.u,{children:[(0,a.jsx)(b.b,{data:n.twitterFindingsByStatus,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:n.twitterFindingsByStatus.map((e,t)=>(0,a.jsx)(N.b,{fill:x[t%x.length]},"cell-".concat(t)))}),(0,a.jsx)(f.u,{})]})})]})]})]})]}),c&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[c.successRates.googleSuccessRate.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Google Success Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[c.successRates.twitterSuccessRate.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Twitter Success Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[c.responseTimeMetrics.averageResponseTime.toFixed(1),"d"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[c.processingTimes.averageProcessingTime.toFixed(1),"d"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Processing Time"})]})]})]}),(null==n?void 0:n.findingsOverTime)&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Findings Over Time"}),(0,a.jsx)(y.h,{width:"100%",height:300,children:(0,a.jsxs)(F.w,{data:n.findingsOverTime,children:[(0,a.jsx)(w.q,{strokeDasharray:"3 3"}),(0,a.jsx)(_.K,{dataKey:"_id",tickFormatter:e=>"".concat(e.year,"-").concat(e.month,"-").concat(e.day)}),(0,a.jsx)(S.B,{}),(0,a.jsx)(f.u,{labelFormatter:e=>"".concat(e.year,"-").concat(e.month,"-").concat(e.day)}),(0,a.jsx)(D.x,{type:"monotone",dataKey:"count",stroke:"#3B82F6",strokeWidth:2})]})})]})]})}var T=s(27284);function Reports(){let[e,t]=(0,l.useState)(""),[s,n]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),{data:g}=(0,i.useQuery)("report-templates",()=>r.get("/reports/templates").then(e=>e.data)),{data:p}=(0,i.useQuery)("clients-list",()=>r.get("/clients").then(e=>e.data.clients)),{data:j}=(0,i.useQuery)("agencies-list",()=>r.get("/clients").then(e=>{let t=Array.from(new Set(e.data.clients.map(e=>e.agency)));return t})),y=(0,i.useMutation)(e=>{let{reportType:t,...s}=e;return r.get("/reports/".concat(t),{params:s})},{onSuccess:t=>{let s=t.data,a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),l=window.URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download="".concat(e,"-").concat((0,T.Z)(new Date,"yyyy-MM-dd"),".json"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(l),document.body.removeChild(i),x.toast.success("Report generated and downloaded successfully")},onError:e=>{var t,s;x.toast.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to generate report")}});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Generate comprehensive reports for your takedowns data"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate Report"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Report Type"}),(0,a.jsxs)("select",{className:"input",value:e,onChange:e=>t(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Report Type"}),g&&Object.entries(g).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s.name},t)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Start Date"}),(0,a.jsx)("input",{type:"date",className:"input",value:s,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"End Date"}),(0,a.jsx)("input",{type:"date",className:"input",value:d,onChange:e=>c(e.target.value)})]})]}),"client"===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Client"}),(0,a.jsxs)("select",{className:"input",value:o,onChange:e=>m(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Client"}),null==p?void 0:p.map(e=>(0,a.jsxs)("option",{value:e._id,children:[e.client_name," (",e.customer,")"]},e._id))]})]}),"agency"===e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"label",children:"Agency"}),(0,a.jsxs)("select",{className:"input",value:u,onChange:e=>h(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select Agency"}),null==j?void 0:j.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsx)("button",{onClick:()=>{if(!e){x.toast.error("Please select a report type");return}let t={};s&&(t.startDate=s),d&&(t.endDate=d),"client"===e&&o?t.clientId=o:"agency"===e&&u&&(t.agency=u),y.mutate({reportType:e,...t})},disabled:y.isLoading,className:"btn btn-primary w-full",children:y.isLoading?"Generating...":"Generate Report"})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Reports"}),(0,a.jsx)("div",{className:"space-y-4",children:g&&Object.entries(g).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:s.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Parameters:"," "]}),(0,a.jsx)("span",{className:"text-xs text-gray-700",children:s.parameters.join(", ")})]})]},t)})})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Reports"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{t("executive-summary"),n(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Executive Summary"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"High-level overview for executives"})]}),(0,a.jsxs)("button",{onClick:()=>{t("performance"),n(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Performance Report"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"System performance metrics"})]}),(0,a.jsxs)("button",{onClick:()=>{t("client"),n(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Client Report"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed client analysis"})]}),(0,a.jsxs)("button",{onClick:()=>{t("agency"),n(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Agency Report"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Agency-wide performance"})]})]})]})]})}var q=s(74992),R=s(74020),Q=s(80654),A=s(66610);let L=[{name:"Dashboard",tab:"dashboard",icon:q.Z},{name:"Query Builder",tab:"query",icon:R.Z},{name:"Analytics",tab:"analytics",icon:Q.Z},{name:"Reports",tab:"reports",icon:A.Z}];function Sidebar(e){let{activeTab:t,onTabChange:s}=e;return(0,a.jsx)("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:(0,a.jsx)("nav",{className:"mt-8 px-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:L.map(e=>{let l=e.icon;return(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>s(e.tab),className:(0,h.W)("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",t===e.tab?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)(l,{className:"mr-3 h-5 w-5"}),e.name]})},e.name)})})})})}var P=s(87965),E=s(51809);function Header(){return(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Takedowns Query App"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(R.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-500",children:(0,a.jsx)(P.Z,{className:"h-6 w-6"})}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-500",children:(0,a.jsx)(E.Z,{className:"h-6 w-6"})})]})]})})})}function Home(){let[e,t]=(0,l.useState)("dashboard");return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(Header,{}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(Sidebar,{activeTab:e,onTabChange:t}),(0,a.jsx)("main",{className:"min-w-0 flex-1 p-6",children:(()=>{switch(e){case"dashboard":default:return(0,a.jsx)(Dashboard,{});case"query":return(0,a.jsx)(QueryBuilder,{});case"analytics":return(0,a.jsx)(Analytics,{});case"reports":return(0,a.jsx)(Reports,{})}})()})]})]})}}},function(e){e.O(0,[687,968,971,472,744],function(){return e(e.s=34405)}),_N_E=e.O()}]);