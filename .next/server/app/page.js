(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},64321:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=s(67096),l=s(16132),i=s(37284),r=s.n(i),n=s(32564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83982)),"/Users/neeltomar/venus/unified-query/query-app/frontend/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,85875)),"/Users/neeltomar/venus/unified-query/query-app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/neeltomar/venus/unified-query/query-app/frontend/app/page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},82570:(e,t,s)=>{Promise.resolve().then(s.bind(s,39182))},39182:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var a=s(30784),l=s(9885),i=s(80229),r=s(48551);let n=r.Z.create({baseURL:"http://localhost:4001",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)));var d=s(57048);let c={clients:{client_name:{type:"string",required:!0},overall_status:{type:"string",enum:["active","disabled"],required:!0},plan:{type:"string",enum:["Basic","Premium","VIP"],required:!0},priority:{type:"string",enum:["Low","Medium","High","Highest","Unconfirmed"],required:!0},customer:{type:"string",required:!0},agency:{type:"string",required:!0},onboarding:{type:"string",enum:["Complete","Incomplete"],required:!0},channel_id:{type:"string"},channel_name:{type:"string"},initial_search_status:{type:"string"},gender:{type:"string"},username:{type:"string"},created_by:{type:"string",required:!0},created:{type:"date"},last_modified:{type:"date"},search_status:{type:"object"},social_media_links:{type:"object"},search_terms:{type:"object",required:!0},channel_details:{type:"object"},_id:{type:"objectId"}},google_findings:{client_id:{type:"objectId",required:!0},url:{type:"string",required:!0},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},priority:{type:"string",enum:["Low","Medium","High","Critical"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},colab_links:{client_id:{type:"objectId",required:!0},url:{type:"string",required:!0},title:{type:"string"},status:{type:"string",enum:["active","inactive","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},colab_updates:{link_all_id:{type:"objectId",required:!0},update_type:{type:"string",enum:["content_change","status_change","removal"]},description:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},twitter_findings:{client_id:{type:"objectId",required:!0},tweet_id:{type:"string",required:!0},tweet_url:{type:"string",required:!0},content:{type:"string"},author:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},reddit_data:{client_id:{type:"objectId",required:!0},post_id:{type:"string",required:!0},post_url:{type:"string",required:!0},title:{type:"string"},content:{type:"string"},subreddit:{type:"string"},author:{type:"string"},status:{type:"string",enum:["pending","reviewed","takedown_requested","removed"]},created:{type:"date"},last_modified:{type:"date"},_id:{type:"objectId"}},excluded_domains:{domain:{type:"string",required:!0},reason:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},included_domains:{domain:{type:"string",required:!0},priority:{type:"string",enum:["Low","Medium","High"]},created:{type:"date"},_id:{type:"objectId"}},rejected_google_domains:{domain:{type:"string",required:!0},rejection_reason:{type:"string"},created:{type:"date"},_id:{type:"objectId"}},delisted_google_domains:{domain:{type:"string",required:!0},delisted_date:{type:"date"},created:{type:"date"},_id:{type:"objectId"}}},o=[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Not Contains"},{value:"starts_with",label:"Starts With"},{value:"ends_with",label:"Ends With"},{value:"regex",label:"Regex"},{value:"in",label:"In"},{value:"not_in",label:"Not In"},{value:"gt",label:"Greater Than"},{value:"gte",label:"Greater Than or Equal"},{value:"lt",label:"Less Than"},{value:"lte",label:"Less Than or Equal"},{value:"between",label:"Between"},{value:"exists",label:"Exists"},{value:"not_exists",label:"Not Exists"}];function QueryCondition({condition:e,collection:t,onChange:s,onRemove:l}){let i=c[t],handleFieldChange=t=>{s({...e,field:t})},handleOperatorChange=t=>{s({...e,operator:t})},handleValueChange=t=>{s({...e,value:t})},handleValuesChange=t=>{let a=t.split(",").map(e=>e.trim()).filter(e=>e);s({...e,values:a})},getFieldType=e=>i&&e?i[e]:null,getPlaceholder=e=>{let t=getFieldType(e);if(!t)return"Value";if(t.enum)return`Select from: ${t.enum.join(", ")}`;switch(t.type){case"string":return"Enter text...";case"number":return"Enter number...";case"date":return"Enter date (YYYY-MM-DD)...";case"objectId":return"Enter ObjectId...";case"boolean":return"true or false";case"object":return"JSON object...";default:return"Enter value..."}},r=["in","not_in","between"].includes(e.operator),n=["exists","not_exists"].includes(e.operator);return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.field,onChange:e=>handleFieldChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Field"}),i&&Object.keys(i).map(e=>{let t=i[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l=t.enum?`(${t.enum.join("|")})`:`(${t.type})`;return(0,a.jsxs)("option",{value:e,children:[s," ",l,t.required&&" *"]},e)})]})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.operator,onChange:e=>handleOperatorChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Operator"}),o.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})}),!n&&a.jsx("div",{className:"flex-1",children:(()=>{let t=getFieldType(e.field);if(r)return a.jsx("input",{type:"text",className:"input text-sm",placeholder:"Comma-separated values",value:e.values?.join(", ")||"",onChange:e=>handleValuesChange(e.target.value)});if(t?.enum)return(0,a.jsxs)("select",{className:"input text-sm",value:e.value,onChange:e=>handleValueChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select value"}),t.enum.map(e=>a.jsx("option",{value:e,children:e},e))]});let s=t?.type==="number"?"number":t?.type==="date"?"date":"text";return a.jsx("input",{type:s,className:"input text-sm",placeholder:getPlaceholder(e.field),value:e.value||"",onChange:e=>handleValueChange(e.target.value)})})()}),a.jsx("button",{onClick:l,className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(d.Z,{className:"h-4 w-4"})})]})}function QueryResults({data:e,onPageChange:t}){if(!e.data||0===e.data.length)return a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No results found"});let s=(()=>{let t=new Set;return e.data.forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t)})();return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",(e.page-1)*e.limit+1," to"," ",Math.min(e.page*e.limit,e.total)," of ",e.total," results"]}),(0,a.jsxs)("span",{children:["Executed in ",e.executionTime,"ms"]})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:s.map(e=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.data.map((e,t)=>a.jsx("tr",{className:"hover:bg-gray-50",children:s.map(t=>a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.jsx(CellRenderer,{value:e[t]})},t))},t))})]})}),e.totalPages>1&&a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>{let s=Math.max(1,e.page-1);t&&t(s)},disabled:!e.hasPrevPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",e.page," of ",e.totalPages]}),a.jsx("button",{onClick:()=>{let s=Math.min(e.totalPages,e.page+1);t&&t(s)},disabled:!e.hasNextPage,className:"px-3 py-1 text-sm border border-gray-300 rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})})]})}function CellRenderer({value:e}){let[t,s]=(0,l.useState)(!1),[i,r]=(0,l.useState)(!1);if(null==e)return a.jsx("span",{className:"text-gray-400 italic",children:"null"});if("object"==typeof e)return Array.isArray(e)?0===e.length?a.jsx("span",{className:"text-gray-400",children:"[]"}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline",children:["[",e.length," items]"]}),i&&a.jsx(ObjectModal,{value:e,onClose:()=>r(!1),title:"Array Contents"})]}):e.client_name?(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.client_name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.plan&&a.jsx("span",{className:"bg-blue-100 text-blue-800 px-1 rounded",children:e.plan}),e.priority&&a.jsx("span",{className:"ml-1 bg-orange-100 text-orange-800 px-1 rounded",children:e.priority})]}),a.jsx("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline text-xs",children:"View full details"}),i&&a.jsx(ObjectModal,{value:e,onClose:()=>r(!1),title:"Client Details"})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 underline",children:[Object.keys(e).length," fields"]}),i&&a.jsx(ObjectModal,{value:e,onClose:()=>r(!1),title:"Object Details"})]});if("boolean"==typeof e)return a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?"Yes":"No"});let n=String(e),d=n.length>50,c=d?n.substring(0,50)+"...":n;if(d)return(0,a.jsxs)("div",{className:"relative",children:[a.jsx("span",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:async()=>{try{if(await navigator.clipboard.writeText(n),document.activeElement?.textContent,document.activeElement){let e=document.activeElement,t=e.textContent;e.textContent="Copied!",setTimeout(()=>{"Copied!"===e.textContent&&(e.textContent=t)},1e3)}}catch(e){console.error("Failed to copy text: ",e)}},className:"cursor-pointer hover:bg-gray-100 rounded px-1",title:"Click to copy full text",children:c}),t&&(0,a.jsxs)("div",{className:"absolute z-50 p-3 bg-gray-900 text-white text-sm rounded-lg shadow-lg max-w-md whitespace-normal break-words bottom-full left-0 mb-2",children:[a.jsx("div",{className:"mb-2",children:n}),a.jsx("div",{className:"text-xs text-gray-300 border-t border-gray-700 pt-2",children:"\uD83D\uDCA1 Click the text above to copy to clipboard"}),a.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]});if(n.includes("T")&&n.includes("Z"))try{let e=new Date(n);return(0,a.jsxs)("span",{className:"text-gray-600",children:[e.toLocaleDateString()," ",e.toLocaleTimeString()]})}catch{return a.jsx("span",{children:c})}return n.startsWith("http")?a.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline max-w-xs truncate block",children:c}):a.jsx("span",{children:c})}function ObjectModal({value:e,onClose:t,title:s}){let l=JSON.stringify(e,null,2),copyToClipboard=async()=>{try{await navigator.clipboard.writeText(l),console.log("JSON copied to clipboard")}catch(e){console.error("Failed to copy JSON: ",e)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl max-h-96 overflow-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:s}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:copyToClipboard,className:"text-blue-600 hover:text-blue-800 text-sm px-2 py-1 bg-blue-50 rounded hover:bg-blue-100",title:"Copy to clipboard",children:"\uD83D\uDCCB Copy"}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),a.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm overflow-auto select-all",children:l}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"\uD83D\uDCA1 You can also select and copy text directly from the JSON above"})]})})}function PredefinedQueries({queries:e,onSelect:t}){return e?(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"\uD83D\uDCA1 Click any query below to load it, then modify the parameters as needed!"}),Object.entries(e).map(([e,s])=>(0,a.jsxs)("button",{onClick:()=>t(s),className:"w-full text-left p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors border border-transparent hover:border-blue-200",children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:s.name}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:s.description}),s.conditions&&s.conditions.some(e=>"client_name_here"===e.value||"subreddit_name"===e.value||"removed"===e.value)&&a.jsx("div",{className:"text-xs text-orange-600 mt-1 font-medium",children:"⚠️ Requires parameter changes"})]},e))]}):a.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading predefined queries..."})}function CollectionSelector({collections:e,value:t,onChange:s}){return a.jsx("select",{className:"input",value:t,onChange:e=>s(e.target.value),children:e?.map(e=>a.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})}function JoinBuilder({join:e,collections:t,currentCollection:s,onChange:l,onRemove:i}){let r=c[s],n=c[e.collection],handleCollectionChange=t=>{l({...e,collection:t})},handleLocalFieldChange=t=>{l({...e,localField:t})},handleForeignFieldChange=t=>{l({...e,foreignField:t})},handleAsChange=t=>{l({...e,as:t})};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.collection,onChange:e=>handleCollectionChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Collection"}),t?.map(e=>a.jsx("option",{value:e,children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.localField,onChange:e=>handleLocalFieldChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Local Field"}),r&&Object.keys(r).map(e=>{let t=r[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l=`(${t.type})`;return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.foreignField,onChange:e=>handleForeignFieldChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Foreign Field"}),n&&Object.keys(n).map(e=>{let t=n[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l=`(${t.type})`;return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",className:"input text-sm",placeholder:"As",value:e.as,onChange:e=>handleAsChange(e.target.value)})}),a.jsx("button",{onClick:i,className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(d.Z,{className:"h-4 w-4"})})]})}function SortBuilder({sort:e,collection:t,onChange:s,onRemove:l}){let i=c[t],handleFieldChange=t=>{s({...e,field:t})},handleDirectionChange=t=>{s({...e,direction:t})};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.field,onChange:e=>handleFieldChange(e.target.value),children:[a.jsx("option",{value:"",children:"Select Field"}),i&&Object.keys(i).map(e=>{let t=i[e],s=e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),l=`(${t.type})`;return(0,a.jsxs)("option",{value:e,children:[s," ",l]},e)})]})}),a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("select",{className:"input text-sm",value:e.direction,onChange:e=>handleDirectionChange(e.target.value),children:[a.jsx("option",{value:"asc",children:"Ascending"}),a.jsx("option",{value:"desc",children:"Descending"})]})}),a.jsx("button",{onClick:l,className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(d.Z,{className:"h-4 w-4"})})]})}var x=s(10345);function SimpleQueryBuilder({onResults:e,query:t,onQueryChange:s,onPageChange:r}){let[d,c]=(0,l.useState)({collection:"google_findings",clientName:"",status:"",priority:"",dateFrom:"",dateTo:"",searchText:"",limit:10,page:1}),o=t||d,m=s||c,u=(0,i.useMutation)(e=>n.post("/query/simple-query",e),{onSuccess:t=>{e(t.data),x.toast.success("Query executed successfully")},onError:e=>{x.toast.error(e.response?.data?.message||"Query execution failed")}});return(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDE80 Simple Query Builder"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Ask simple questions about your data - just fill in what you're looking for!"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"What type of data?"}),a.jsx("select",{className:"input",value:o.collection,onChange:e=>m(t=>({...t,collection:e.target.value})),children:[{value:"google_findings",label:"Google Findings"},{value:"twitter_findings",label:"Twitter Findings"},{value:"reddit_data",label:"Reddit Data"},{value:"colab_links",label:"Colab Links"},{value:"clients",label:"Clients"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Client name (optional)"}),a.jsx("input",{type:"text",className:"input",placeholder:"e.g., Claire Stone, John Doe",value:o.clientName,onChange:e=>m(t=>({...t,clientName:e.target.value}))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to search all clients"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Status (optional)"}),a.jsx("select",{className:"input",value:o.status,onChange:e=>m(t=>({...t,status:e.target.value})),children:[{value:"",label:"Any Status"},{value:"rejected",label:"Rejected"},{value:"delisted",label:"Delisted"},{value:"counter-notice",label:"Counter-notice"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Priority (optional)"}),a.jsx("select",{className:"input",value:o.priority,onChange:e=>m(t=>({...t,priority:e.target.value})),children:[{value:"",label:"Any Priority"},{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Critical",label:"Critical"}].map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"From date (optional)"}),a.jsx("input",{type:"date",className:"input",value:o.dateFrom,onChange:e=>m(t=>({...t,dateFrom:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"To date (optional)"}),a.jsx("input",{type:"date",className:"input",value:o.dateTo,onChange:e=>m(t=>({...t,dateTo:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"label",children:"Search for specific content (optional)"}),a.jsx("input",{type:"text",className:"input",placeholder:"e.g., sierra skye, domain name, specific keywords",value:o.searchText,onChange:e=>m(t=>({...t,searchText:e.target.value}))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Search in titles, descriptions, and content"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"label",children:"How many results?"}),(0,a.jsxs)("select",{className:"input w-32",value:o.limit,onChange:e=>m(t=>({...t,limit:parseInt(e.target.value)})),children:[a.jsx("option",{value:10,children:"10 results"}),a.jsx("option",{value:25,children:"25 results"}),a.jsx("option",{value:50,children:"50 results"}),a.jsx("option",{value:100,children:"100 results"})]})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Example questions you can ask:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"• \"Show me all Google findings with status 'delisted'\""}),a.jsx("li",{children:"• \"Find Google findings for client 'Claire Stone' from last month\""}),a.jsx("li",{children:'• "Show high priority findings created this year"'}),a.jsx("li",{children:"• \"Search for 'sierra skye' in all Google findings\""})]})]}),a.jsx("button",{onClick:()=>{u.mutate(o)},disabled:u.isLoading,className:"btn btn-primary w-full",children:u.isLoading?"Searching...":"\uD83D\uDD0D Search"})]})}function QuickStartGuide({onSelectExample:e}){return(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDE80 Quick Start Examples"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Click an example to get started with common queries:"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[{id:"google-findings-search",title:"Search Google Findings",description:"Find Google findings with text search (like 'sierra skye')",icon:"\uD83D\uDD0D",action:()=>e({collection:"google_findings",searchText:"sierra skye",status:"",clientName:""})},{id:"client-specific-findings",title:"Findings by Client",description:"Find all findings for a specific client",icon:"\uD83D\uDC64",action:()=>e({collection:"google_findings",clientName:"Claire Stone",status:"",searchText:""})},{id:"status-based-search",title:"Filter by Status",description:"Find items with specific status (pending, removed, etc.)",icon:"\uD83D\uDCCA",action:()=>e({collection:"google_findings",status:"removed",clientName:"",searchText:""})},{id:"date-range-search",title:"Date Range Query",description:"Find items created within a specific time period",icon:"\uD83D\uDCC5",action:()=>e({collection:"google_findings",dateFrom:"2024-01-01",dateTo:"2024-12-31",clientName:"",searchText:""})}].map(e=>a.jsx("button",{onClick:e.action,className:"p-3 text-left bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 rounded-lg border border-blue-200 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[a.jsx("span",{className:"text-lg",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:e.title}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]})},e.id))}),a.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"text-sm text-green-800",children:[a.jsx("strong",{children:"Pro tip:"})," Start with Simple Query mode for basic searches, then switch to Advanced mode for complex joins and filtering."]})})]})}function QueryBuilder(){let[e,t]=(0,l.useState)({collection:"clients",conditions:[],joins:[],sort:[],select:[],page:1,limit:10,search:""}),[s,r]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),[o,m]=(0,l.useState)("simple"),[u,h]=(0,l.useState)({collection:"google_findings",clientName:"",status:"",priority:"",dateFrom:"",dateTo:"",searchText:"",limit:10,page:1}),{data:g}=(0,i.useQuery)("collections",()=>n.get("/query/collections").then(e=>e.data)),{data:p}=(0,i.useQuery)("predefined-queries",()=>n.get("/query/predefined-queries").then(e=>e.data)),y=(0,i.useMutation)(e=>n.post("/query/execute",e),{onSuccess:e=>{r(e.data),x.toast.success("Query executed successfully")},onError:e=>{x.toast.error(e.response?.data?.message||"Query execution failed")},onSettled:()=>{c(!1)}}),handleSimplePageChange=e=>{let t={...u,page:e};h(t),n.post("/query/simple-query",t).then(e=>{r(e.data),x.toast.success("Query executed successfully")}).catch(e=>{x.toast.error(e.response?.data?.message||"Query execution failed")})},updateCondition=(e,s)=>{t(t=>({...t,conditions:t.conditions.map((t,a)=>a===e?s:t)}))},removeCondition=e=>{t(t=>({...t,conditions:t.conditions.filter((t,s)=>s!==e)}))},updateJoin=(e,s)=>{t(t=>({...t,joins:t.joins.map((t,a)=>a===e?s:t)}))},removeJoin=e=>{t(t=>({...t,joins:t.joins.filter((t,s)=>s!==e)}))},updateSort=(e,s)=>{t(t=>({...t,sort:t.sort.map((t,a)=>a===e?s:t)}))},removeSort=e=>{t(t=>({...t,sort:t.sort.filter((t,s)=>s!==e)}))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Query Builder"}),a.jsx("p",{className:"text-gray-600",children:"Build and execute queries on your data - choose simple or advanced mode"})]}),(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[a.jsx("button",{onClick:()=>m("simple"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"simple"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"\uD83D\uDE80 Simple Query"}),a.jsx("button",{onClick:()=>m("advanced"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${"advanced"===o?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"⚙️ Advanced Query"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:"simple"===o?a.jsx(SimpleQueryBuilder,{onResults:r,query:u,onQueryChange:h,onPageChange:handleSimplePageChange}):(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Configuration"}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"label",children:"Collection"}),a.jsx(CollectionSelector,{collections:g,value:e.collection,onChange:e=>t(t=>({...t,collection:e}))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"label",children:"Search"}),a.jsx("input",{type:"text",className:"input",placeholder:"Enter search terms...",value:e.search,onChange:e=>t(t=>({...t,search:e.target.value}))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"label mb-0",children:"Conditions"}),a.jsx("button",{onClick:()=>{t(e=>({...e,conditions:[...e.conditions,{field:"",operator:"equals",value:""}]}))},className:"btn btn-secondary text-sm",children:"Add Condition"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.conditions.map((t,s)=>a.jsx(QueryCondition,{condition:t,collection:e.collection,onChange:e=>updateCondition(s,e),onRemove:()=>removeCondition(s)},s)),0===e.conditions.length&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No conditions added"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"label mb-0",children:"Joins"}),a.jsx("button",{onClick:()=>{t(e=>({...e,joins:[...e.joins,{collection:"",localField:"",foreignField:"",as:""}]}))},className:"btn btn-secondary text-sm",children:"Add Join"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.joins.map((t,s)=>a.jsx(JoinBuilder,{join:t,collections:g,currentCollection:e.collection,onChange:e=>updateJoin(s,e),onRemove:()=>removeJoin(s)},s)),0===e.joins.length&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No joins added"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("label",{className:"label mb-0",children:"Sort"}),a.jsx("button",{onClick:()=>{t(e=>({...e,sort:[...e.sort,{field:"",direction:"asc"}]}))},className:"btn btn-secondary text-sm",children:"Add Sort"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.sort.map((t,s)=>a.jsx(SortBuilder,{sort:t,collection:e.collection,onChange:e=>updateSort(s,e),onRemove:()=>removeSort(s)},s)),0===e.sort.length&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No sorting added"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Page"}),a.jsx("input",{type:"number",className:"input",min:"1",value:e.page,onChange:e=>t(t=>({...t,page:parseInt(e.target.value)||1}))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Limit"}),a.jsx("input",{type:"number",className:"input",min:"1",max:"100",value:e.limit,onChange:e=>t(t=>({...t,limit:parseInt(e.target.value)||10}))})]})]}),a.jsx("button",{onClick:()=>{c(!0),y.mutate(e)},disabled:d,className:"btn btn-primary w-full",children:d?"Executing...":"Execute Query"})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:["simple"===o&&a.jsx(QuickStartGuide,{onSelectExample:e=>{h(t=>({...t,...e}))}}),"advanced"===o&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Predefined Queries"}),a.jsx(PredefinedQueries,{queries:p,onSelect:e=>{t({collection:e.collection,conditions:e.conditions||[],joins:e.joins||[],sort:e.sort||[],select:e.select||[],page:1,limit:10,search:""})}})]}),s&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Results"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Total Records:"}),a.jsx("span",{className:"font-medium",children:s.total})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Page:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.page," of ",s.totalPages]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Execution Time:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.executionTime,"ms"]})]})]})]})]})]}),s&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Query Results"}),a.jsx(QueryResults,{data:s,onPageChange:"simple"===o?handleSimplePageChange:s=>{let a={...e,page:s};t(a),c(!0),y.mutate(a)}})]})]})}var m=s(6081),u=s(2233),h=s(10566);function MetricCard({title:e,value:t,subtitle:s,change:l,changeType:i="neutral"}){return a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),s&&a.jsx("p",{className:"text-sm text-gray-500",children:s})]}),l&&(0,a.jsxs)("div",{className:(0,h.W)("flex items-center text-sm font-medium","positive"===i&&"text-green-600","negative"===i&&"text-red-600","neutral"===i&&"text-gray-600"),children:["positive"===i&&a.jsx(m.Z,{className:"h-4 w-4 mr-1"}),"negative"===i&&a.jsx(u.Z,{className:"h-4 w-4 mr-1"}),l]})]})})}var g=s(45253);function RecentActivity({data:e}){return e&&0!==e.length?a.jsx("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.type," for ",e.client]}),a.jsx("p",{className:"text-xs text-gray-500",children:(0,g.Z)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.customer," • ",e.domain||"N/A"]}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"resolved"===e.status||"delisted"===e.status?"bg-green-100 text-green-800":"pending"===e.status||"in_progress"===e.status?"bg-yellow-100 text-yellow-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.status})})]})]},e.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No recent activity"})}function TopPerformers({data:e}){return e&&0!==e.length?a.jsx("div",{className:"space-y-4",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-primary-700",children:t+1})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e._id}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.customer," • ",e.agency]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.resolutionRate.toFixed(1),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.resolvedFindings,"/",e.totalFindings," resolved"]})]})]},e._id))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No performance data available"})}var p=s(19503),y=s(25507);function Alerts({data:e}){return e&&0!==e.length?a.jsx("div",{className:"space-y-4",children:e.map((e,t)=>a.jsx("div",{className:(0,h.W)("p-4 rounded-lg border-l-4","error"===e.type&&"bg-red-50 border-red-400","warning"===e.type&&"bg-yellow-50 border-yellow-400","info"===e.type&&"bg-blue-50 border-blue-400"),children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:"error"===e.type||"warning"===e.type?a.jsx(p.Z,{className:"h-5 w-5 text-red-400"}):a.jsx(y.Z,{className:"h-5 w-5 text-blue-400"})}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("h3",{className:(0,h.W)("text-sm font-medium","error"===e.type&&"text-red-800","warning"===e.type&&"text-yellow-800","info"===e.type&&"text-blue-800"),children:e.title}),(0,a.jsxs)("div",{className:(0,h.W)("mt-2 text-sm","error"===e.type&&"text-red-700","warning"===e.type&&"text-yellow-700","info"===e.type&&"text-blue-700"),children:[a.jsx("p",{children:e.message}),e.data&&e.data.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[a.jsx("p",{className:"font-medium",children:"Affected items:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[e.data.slice(0,3).map((e,t)=>(0,a.jsxs)("li",{children:[e.client_name||e._id||`Item ${t+1}`,e.pendingCount&&` (${e.pendingCount} pending)`]},t)),e.data.length>3&&(0,a.jsxs)("li",{children:["... and ",e.data.length-3," more"]})]})]})]})]})]})},t))}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No alerts"})}function Dashboard(){let{data:e,isLoading:t}=(0,i.useQuery)("dashboard-overview",()=>n.get("/dashboard/overview").then(e=>e.data)),{data:s,isLoading:l}=(0,i.useQuery)("dashboard-activity",()=>n.get("/dashboard/recent-activity?limit=10").then(e=>e.data)),{data:r,isLoading:d}=(0,i.useQuery)("dashboard-performers",()=>n.get("/dashboard/top-performers").then(e=>e.data)),{data:c,isLoading:o}=(0,i.useQuery)("dashboard-alerts",()=>n.get("/dashboard/alerts").then(e=>e.data)),{data:x,isLoading:m}=(0,i.useQuery)("dashboard-quick-stats",()=>n.get("/dashboard/quick-stats").then(e=>e.data));return t?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Overview of your takedowns management system"})]}),x&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(MetricCard,{title:"Findings (24h)",value:x.findingsLast24h,change:"+12%",changeType:"positive"}),a.jsx(MetricCard,{title:"Findings (7d)",value:x.findingsLast7d,change:"+8%",changeType:"positive"}),a.jsx(MetricCard,{title:"New Clients (7d)",value:x.newClientsLast7d,change:"+3%",changeType:"positive"}),a.jsx(MetricCard,{title:"Resolved (7d)",value:x.resolvedLast7d,change:"+15%",changeType:"positive"})]}),e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(MetricCard,{title:"Total Clients",value:e.totalClients,subtitle:`${e.activeClients} active`}),a.jsx(MetricCard,{title:"Total Findings",value:e.totalFindings,subtitle:`${e.resolvedFindings} resolved`}),a.jsx(MetricCard,{title:"Resolution Rate",value:`${e.resolutionRate.toFixed(1)}%`,subtitle:`${e.pendingFindings} pending`}),a.jsx(MetricCard,{title:"High Priority",value:e.highPriorityClients,subtitle:"clients"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),l?a.jsx("div",{className:"animate-pulse space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>a.jsx("div",{className:"h-4 bg-gray-200 rounded"},t))}):a.jsx(RecentActivity,{data:s})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performers"}),d?a.jsx("div",{className:"animate-pulse space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>a.jsx("div",{className:"h-4 bg-gray-200 rounded"},t))}):a.jsx(TopPerformers,{data:r})]})]}),c&&c.length>0&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Alerts"}),a.jsx(Alerts,{data:c})]})]})}var j=s(63647),v=s(16324),b=s(44723),N=s(8081),f=s(54206),C=s(34482),w=s(24300),_=s(35522),S=s(14839),q=s(98741),k=s(34707),F=s(97106);function Analytics(){let{data:e,isLoading:t}=(0,i.useQuery)("analytics-dashboard",()=>n.get("/analytics/dashboard").then(e=>e.data)),{data:s,isLoading:l}=(0,i.useQuery)("analytics-clients",()=>n.get("/analytics/clients").then(e=>e.data)),{data:r,isLoading:d}=(0,i.useQuery)("analytics-findings",()=>n.get("/analytics/findings").then(e=>e.data)),{data:c,isLoading:o}=(0,i.useQuery)("analytics-performance",()=>n.get("/analytics/performance").then(e=>e.data));if(t||l||d||o)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let x=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Comprehensive analytics and insights for your takedowns system"})]}),e?.overview&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-2xl font-bold text-primary-600",children:e.overview.totalClients}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Clients"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.overview.totalGoogleFindings}),a.jsx("div",{className:"text-sm text-gray-600",children:"Google Findings"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.overview.totalColabLinks}),a.jsx("div",{className:"text-sm text-gray-600",children:"Colab Links"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.overview.totalTwitterFindings}),a.jsx("div",{className:"text-sm text-gray-600",children:"Twitter Findings"})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:e.overview.totalRedditData}),a.jsx("div",{className:"text-sm text-gray-600",children:"Reddit Data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Client Distribution"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"By Status"}),a.jsx(j.h,{width:"100%",height:200,children:(0,a.jsxs)(v.u,{children:[a.jsx(b.b,{data:s.clientsByStatus,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:s.clientsByStatus.map((e,t)=>a.jsx(N.b,{fill:x[t%x.length]},`cell-${t}`))}),a.jsx(f.u,{})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"By Priority"}),a.jsx(j.h,{width:"100%",height:200,children:(0,a.jsxs)(C.v,{data:s.clientsByPriority,children:[a.jsx(w.q,{strokeDasharray:"3 3"}),a.jsx(_.K,{dataKey:"_id"}),a.jsx(S.B,{}),a.jsx(f.u,{}),a.jsx(q.$,{dataKey:"count",fill:"#3B82F6"})]})})]})]})]}),r&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Finding Analytics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Google Findings by Type"}),a.jsx(j.h,{width:"100%",height:200,children:(0,a.jsxs)(C.v,{data:r.googleFindingsByType,children:[a.jsx(w.q,{strokeDasharray:"3 3"}),a.jsx(_.K,{dataKey:"_id"}),a.jsx(S.B,{}),a.jsx(f.u,{}),a.jsx(q.$,{dataKey:"count",fill:"#10B981"})]})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Twitter Findings by Status"}),a.jsx(j.h,{width:"100%",height:200,children:(0,a.jsxs)(v.u,{children:[a.jsx(b.b,{data:r.twitterFindingsByStatus,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:r.twitterFindingsByStatus.map((e,t)=>a.jsx(N.b,{fill:x[t%x.length]},`cell-${t}`))}),a.jsx(f.u,{})]})})]})]})]})]}),c&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[c.successRates.googleSuccessRate.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Google Success Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[c.successRates.twitterSuccessRate.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Twitter Success Rate"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[c.responseTimeMetrics.averageResponseTime.toFixed(1),"d"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response Time"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[c.processingTimes.averageProcessingTime.toFixed(1),"d"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Processing Time"})]})]})]}),r?.findingsOverTime&&(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Findings Over Time"}),a.jsx(j.h,{width:"100%",height:300,children:(0,a.jsxs)(k.w,{data:r.findingsOverTime,children:[a.jsx(w.q,{strokeDasharray:"3 3"}),a.jsx(_.K,{dataKey:"_id",tickFormatter:e=>`${e.year}-${e.month}-${e.day}`}),a.jsx(S.B,{}),a.jsx(f.u,{labelFormatter:e=>`${e.year}-${e.month}-${e.day}`}),a.jsx(F.x,{type:"monotone",dataKey:"count",stroke:"#3B82F6",strokeWidth:2})]})})]})]})}var D=s(27437);function Reports(){let[e,t]=(0,l.useState)(""),[s,r]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),{data:g}=(0,i.useQuery)("report-templates",()=>n.get("/reports/templates").then(e=>e.data)),{data:p}=(0,i.useQuery)("clients-list",()=>n.get("/clients").then(e=>e.data.clients)),{data:y}=(0,i.useQuery)("agencies-list",()=>n.get("/clients").then(e=>{let t=Array.from(new Set(e.data.clients.map(e=>e.agency)));return t})),j=(0,i.useMutation)(e=>{let{reportType:t,...s}=e;return n.get(`/reports/${t}`,{params:s})},{onSuccess:t=>{let s=t.data,a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),l=window.URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.download=`${e}-${(0,D.Z)(new Date,"yyyy-MM-dd")}.json`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(l),document.body.removeChild(i),x.toast.success("Report generated and downloaded successfully")},onError:e=>{x.toast.error(e.response?.data?.message||"Failed to generate report")}});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports"}),a.jsx("p",{className:"text-gray-600",children:"Generate comprehensive reports for your takedowns data"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Generate Report"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Report Type"}),(0,a.jsxs)("select",{className:"input",value:e,onChange:e=>t(e.target.value),children:[a.jsx("option",{value:"",children:"Select Report Type"}),g&&Object.entries(g).map(([e,t])=>a.jsx("option",{value:e,children:t.name},e))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Start Date"}),a.jsx("input",{type:"date",className:"input",value:s,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"End Date"}),a.jsx("input",{type:"date",className:"input",value:d,onChange:e=>c(e.target.value)})]})]}),"client"===e&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Client"}),(0,a.jsxs)("select",{className:"input",value:o,onChange:e=>m(e.target.value),children:[a.jsx("option",{value:"",children:"Select Client"}),p?.map(e=>a.jsxs("option",{value:e._id,children:[e.client_name," (",e.customer,")"]},e._id))]})]}),"agency"===e&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"label",children:"Agency"}),(0,a.jsxs)("select",{className:"input",value:u,onChange:e=>h(e.target.value),children:[a.jsx("option",{value:"",children:"Select Agency"}),y?.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsx("button",{onClick:()=>{if(!e){x.toast.error("Please select a report type");return}let t={};s&&(t.startDate=s),d&&(t.endDate=d),"client"===e&&o?t.clientId=o:"agency"===e&&u&&(t.agency=u),j.mutate({reportType:e,...t})},disabled:j.isLoading,className:"btn btn-primary w-full",children:j.isLoading?"Generating...":"Generate Report"})]})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Available Reports"}),a.jsx("div",{className:"space-y-4",children:g&&Object.entries(g).map(([e,t])=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:t.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Parameters:"," "]}),a.jsx("span",{className:"text-xs text-gray-700",children:t.parameters.join(", ")})]})]},e))})]})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Reports"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>{t("executive-summary"),r(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Executive Summary"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"High-level overview for executives"})]}),(0,a.jsxs)("button",{onClick:()=>{t("performance"),r(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Performance Report"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"System performance metrics"})]}),(0,a.jsxs)("button",{onClick:()=>{t("client"),r(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Client Report"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed client analysis"})]}),(0,a.jsxs)("button",{onClick:()=>{t("agency"),r(""),c("")},className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Agency Report"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Agency-wide performance"})]})]})]})]})}var T=s(69719),P=s(96198),R=s(59448),A=s(69195);let Q=[{name:"Dashboard",tab:"dashboard",icon:T.Z},{name:"Query Builder",tab:"query",icon:P.Z},{name:"Analytics",tab:"analytics",icon:R.Z},{name:"Reports",tab:"reports",icon:A.Z}];function Sidebar({activeTab:e,onTabChange:t}){return a.jsx("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:a.jsx("nav",{className:"mt-8 px-4",children:a.jsx("ul",{className:"space-y-2",children:Q.map(s=>{let l=s.icon;return a.jsx("li",{children:(0,a.jsxs)("button",{onClick:()=>t(s.tab),className:(0,h.W)("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",e===s.tab?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[a.jsx(l,{className:"mr-3 h-5 w-5"}),s.name]})},s.name)})})})})}var L=s(95050),E=s(78750);function Header(){return a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Takedowns Query App"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(P.Z,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-500",children:a.jsx(L.Z,{className:"h-6 w-6"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-500",children:a.jsx(E.Z,{className:"h-6 w-6"})})]})]})})})}function Home(){let[e,t]=(0,l.useState)("dashboard");return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(Header,{}),(0,a.jsxs)("div",{className:"flex",children:[a.jsx(Sidebar,{activeTab:e,onTabChange:t}),a.jsx("main",{className:"min-w-0 flex-1 p-6",children:(()=>{switch(e){case"dashboard":default:return a.jsx(Dashboard,{});case"query":return a.jsx(QueryBuilder,{});case"analytics":return a.jsx(Analytics,{});case"reports":return a.jsx(Reports,{})}})()})]})]})}},83982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>i,default:()=>d});var a=s(95153);let l=(0,a.createProxy)(String.raw`/Users/neeltomar/venus/unified-query/query-app/frontend/app/page.tsx`),{__esModule:i,$$typeof:r}=l,n=l.default,d=n}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[863,86,414],()=>__webpack_exec__(64321));module.exports=s})();